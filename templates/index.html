<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="ğŸ„ ìµëª… í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨">
    <meta property="og:description" content="ì›í•˜ëŠ” í¸ì§€ì§€ë¥¼ ê³¨ë¼ ë”°ëœ»í•œ ë§ˆìŒì„ ì „í•´ë³´ì„¸ìš”!">
    <meta property="og:image" content="https://raw.githubusercontent.com/ë³¸ì¸ìœ ì €ë„¤ì„/ì €ì¥ì†Œì´ë¦„/main/bg1.png">
    <title>ìµëª… í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background: #fdf2f2; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 400px; border: 2px solid #e63946; text-align: center; }
        h2 { color: #e63946; margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; text-align: left; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; font-size: 14px; }
        select, input, textarea { 
            width: 100%; padding: 14px; border: 2px solid #f1f1f1; border-radius: 12px; 
            box-sizing: border-box; font-size: 15px; background-color: #fcf1f1; transition: all 0.3s ease;
        }
        select:focus, input:focus, textarea:focus { outline: none; border-color: #e63946; background-color: #ffffff; box-shadow: 0 0 8px rgba(230, 57, 70, 0.2); }
        
        /* í…Œë§ˆ ì„ íƒ ìŠ¤íƒ€ì¼ */
        .theme-selector { display: flex; gap: 15px; justify-content: center; margin-top: 5px; }
        .theme-option { cursor: pointer; text-align: center; flex: 1; }
        .theme-option input { display: none; }
        .theme-option div { 
            padding: 10px; border: 2px solid #f1f1f1; border-radius: 10px; background: #fff; 
            font-size: 13px; font-weight: bold; color: #888; transition: 0.3s;
        }
        .theme-option input:checked + div { border-color: #e63946; color: #e63946; background: #fdf2f2; }

        textarea { height: 120px; resize: none; }
        button { 
            width: 100%; padding: 15px; background: #e63946; border: none; border-radius: 10px; 
            color: white; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px;
            box-shadow: 0 4px 0 #b32d36;
        }
        button:active { transform: translateY(2px); box-shadow: 0 2px 0 #b32d36; }
        button:disabled { background: #ccc; box-shadow: none; cursor: not-allowed; }
        .hint { font-size: 11px; color: #a5a5a5; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ„ ìµëª… ë§ˆìŒ ì „ë‹¬ì†Œ</h2>
        
        <div class="input-group">
            <label>í¸ì§€ì§€ ë””ìì¸ ì„ íƒ</label>
            <div class="theme-selector">
                <label class="theme-option">
                    <input type="radio" name="theme" value="bg1.png" checked>
                    <div>â›„ ê²¨ìš¸ í…Œë§ˆ</div>
                </label>
                <label class="theme-option">
                    <input type="radio" name="theme" value="bg2.png">
                    <div>ğŸŒŠ ì—¬ë¦„ í…Œë§ˆ</div>
                </label>
            </div>
        </div>

        <div class="input-group">
            <label>ë³´ë‚´ëŠ” ì‚¬ëŒ</label>
            <input type="text" id="senderName" placeholder="(ê³µê°œ ë˜ì§€ ì•Šì•„ìš”!)">
        </div>
        <div class="input-group">
            <label>ë°›ëŠ” ì‚¬ëŒ</label>
            <select id="memberSelect">
                <option value="">ë©¤ë²„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                {% for member in members %}
                <option value="{{ member.id }}">{{ member.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="input-group">
            <label>í¸ì§€ ë‚´ìš©</label>
            <textarea id="message" placeholder="ë”°ëœ»í•œ í•œë§ˆë””ë¥¼ ì ì–´ì£¼ì„¸ìš”"></textarea>
            <div class="hint">ì˜ˆìœ í¸ì§€ì§€ë¡œ ì „ì†¡ ë©ë‹ˆë‹¤!</div>
        </div>
        <button id="sendBtn" onclick="sendMessage()">ìµëª… í¸ì§€ ë³´ë‚´ê¸°</button>
    </div>

    <script>
        function sendMessage() {
            const btn = document.getElementById('sendBtn');
            const selectedTheme = document.querySelector('input[name="theme"]:checked').value;
            
            const data = {
                userId: document.getElementById('memberSelect').value,
                userName: document.getElementById('memberSelect').options[document.getElementById('memberSelect').selectedIndex]?.text,
                senderName: document.getElementById('senderName').value,
                message: document.getElementById('message').value,
                theme: selectedTheme
            };

            if (!data.userId || !data.message || !data.senderName) return alert("í•­ëª©ì„ ëª¨ë‘ ì±„ì›Œì£¼ì„¸ìš”!");

            btn.disabled = true; btn.innerText = "ì „ì†¡ ì¤‘...";

            fetch('/send', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            }).then(() => {
                alert("í¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                document.getElementById('message').value = "";
                let count = 3;
                const timer = setInterval(() => {
                    btn.innerText = `ëŒ€ê¸° (${count}ì´ˆ)`;
                    if (count-- <= 0) { clearInterval(timer); btn.disabled = false; btn.innerText = "ìµëª… í¸ì§€ ë³´ë‚´ê¸°"; }
                }, 1000);
            });
        }
    </script>
</body>
</html>
