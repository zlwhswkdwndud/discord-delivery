<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµëª… í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background: #fdf2f2; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 400px; border: 2px solid #e63946; text-align: center; }
        h2 { color: #e63946; margin-bottom: 25px; }
        
        .input-group { margin-bottom: 20px; text-align: left; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; font-size: 14px; }
        
        /* ì…ë ¥ ì¹¸ ìƒ‰ìƒ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        select, input, textarea { 
            width: 100%; padding: 14px; border: 2px solid #f1f1f1; border-radius: 12px; 
            box-sizing: border-box; font-size: 15px; background-color: #fcf1f1; /* ì—°í•œ í•‘í¬ìƒ‰ ë°”íƒ• */
            color: #333; transition: all 0.3s ease;
        }
        select:focus, input:focus, textarea:focus { 
            outline: none; border-color: #e63946; background-color: #ffffff; 
            box-shadow: 0 0 8px rgba(230, 57, 70, 0.2); 
        }
        
        textarea { height: 120px; resize: none; }
        button { 
            width: 100%; padding: 15px; background: #e63946; border: none; border-radius: 10px; 
            color: white; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px;
            box-shadow: 0 4px 0 #b32d36;
        }
        button:active { transform: translateY(2px); box-shadow: 0 2px 0 #b32d36; }
        button:disabled { background: #ccc; box-shadow: none; cursor: not-allowed; transform: none; }
        .hint { font-size: 11px; color: #a5a5a5; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ„ ìµëª… ë§ˆìŒ ì „ë‹¬ì†Œ</h2>
        <div class="input-group">
            <label>ğŸ‘¤ ë³´ë‚´ëŠ” ì‚¬ëŒ</label>
            <input type="text" id="senderName" placeholder="ê´€ë¦¬ì í™•ì¸ìš© ì„±í•¨ì„ ì ì–´ì£¼ì„¸ìš”">
        </div>
        <div class="input-group">
            <label>ğŸ¯ ë°›ëŠ” ì‚¬ëŒ</label>
            <select id="memberSelect">
                <option value="">ë©¤ë²„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                {% for member in members %}
                <option value="{{ member.id }}">{{ member.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="input-group">
            <label>ğŸ“ í¸ì§€ ë‚´ìš©</label>
            <textarea id="message" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (ì‚¬ì§„ì— í•©ì„±ë©ë‹ˆë‹¤)"></textarea>
            <div class="hint">ë‚´ìš©ì´ ë„ˆë¬´ ê¸¸ë©´ í•˜ë‹¨ì´ ì˜ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
        </div>
        <button id="sendBtn" onclick="sendMessage()">ìµëª… í¸ì§€ ë³´ë‚´ê¸°</button>
    </div>

    <script>
        function sendMessage() {
            const btn = document.getElementById('sendBtn');
            const data = {
                userId: document.getElementById('memberSelect').value,
                userName: document.getElementById('memberSelect').options[document.getElementById('memberSelect').selectedIndex]?.text,
                senderName: document.getElementById('senderName').value,
                message: document.getElementById('message').value
            };

            if (!data.userId || !data.message || !data.senderName) return alert("í•­ëª©ì„ ëª¨ë‘ ì±„ì›Œì£¼ì„¸ìš”!");

            btn.disabled = true;
            btn.innerText = "ì œì‘ ì¤‘...";

            fetch('/send', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            }).then(() => {
                alert("ì„±ê³µì ìœ¼ë¡œ ë³´ëƒˆìŠµë‹ˆë‹¤!");
                document.getElementById('message').value = "";
                let count = 3;
                const timer = setInterval(() => {
                    btn.innerText = `ëŒ€ê¸° (${count}ì´ˆ)`;
                    if (count-- <= 0) {
                        clearInterval(timer);
                        btn.disabled = false;
                        btn.innerText = "ìµëª… í¸ì§€ ë³´ë‚´ê¸°";
                    }
                }, 1000);
            });
        }
    </script>
</body>
</html>
